title: Start the ODBC Manager application.
ref: launch-odbc-manager-macos
level: 4
stepnum: 1
content: |
  .. note::

     ODBC Manager is included with the |odbc-driver-name|.
---
title: Add a System DSN
ref: click-system-dsn-macos
level: 4
stepnum: 2
content: |
  .. figure:: /images/bi-connector/odbc-manager.png
     :alt: ODBC Manager DSN configuration
     :align: center

  a. Click :guilabel:`System DSN`.
  b. Click :guilabel:`Add...`.
  c. Click :guilabel:`MongoDB Unicode ODBC` 
  d. Click :guilabel:`OK`.

---
title: Provide the DSN name and description.
ref: enter-dsn-name-macos
level: 4
stepnum: 3
content: |

  Enter an explanation of the purpose of this 
  |dsn| into the  
  :guilabel:`Description` box.

  .. note::

     Do not close the setup window. Proceed to the next step.
---
title: Provide the connection settings.
ref: keywords-dsn-macos
level: 4
stepnum: 4
content: |
  .. include:: /includes/odbc-manager-keywords.rst

  Using the procedure above, add the following keyword/value pairs:

  .. list-table::
     :widths: 20 80
     :header-rows: 1
     :stub-columns: 1
  
     * - Keyword
       - Value
  
     * - SERVER
       - Hostname or IP address of the |bi-short| host.

         .. admonition:: Kerberos authentication only
            :class: note

            This hostname must match the value set in the ``keytab`` 
            created for the `mongosql` and `mongosql2` service 
            principals.
  
     * - PORT
       - |iana| `port number <https://www.iana.org/assignments/service-names-port-numbers/service-names-port-numbers.xhtml>`_
         for the |bi|. The default is ``3306``.

     * - DATABASE
       - *Optional.* The database to use after connecting.

  .. include:: /includes/fact-odbc-parameters.rst

  .. example:: 

     Your |dsn| configuration should resemble 
     the following image:
  
     .. figure:: /images/bi-connector/odbc-manager-dsn-config.png
        :alt: ODBC Manager DSN configuration
        :align: center

  .. note::

     Do not close the setup window. Proceed to the next step.
---
title: (Optional) If authentication is enabled, add the authentication keywords.
ref: authentication-keywords-dsn-macos
level: 4
stepnum: 5
content: |
  .. include:: /includes/odbc-manager-keywords.rst

  Using the procedure above, add the following keyword/value pairs:

  .. list-table::
     :widths: 20 80
     :header-rows: 1
     :stub-columns: 1

     * - Keyword
       - Value
  
     * - UID
       - The username for the user that can access the database currently connected to |bi-short|.
  
         Unless you specified a ``defaultMechanism`` in your
         |bi| :ref:`configuration file <config-format>`, you
         must append the authenticating database to the username.
    
         .. tabs::

            hidden: true
         
            tabs:
              - id: uidpwd
                name: Username and Password
                content: |
         
                  The expected and default authenticating database is 
                  ``admin``.

                  .. example::

                     To authenticate the user ``myTestUser`` against
                     the ``test`` database:

                     ``myTestUser?source=test``
         
              - id: ldap
                name: LDAP
                content: |
         
                  The expected and default authenticating database is 
                  ``$external``.

                  .. example::

                     To authenticate the LDAP user ``myTestUser`` 
                     against the ``$external`` database:
                     
                     ``myTestUser?source=$external&mechanism=PLAIN``

              - id: kerberos
                name: Kerberos
                content: |
         
                  The expected and default authenticating database is 
                  ``$external``.

                  .. example::

                     To authenticate the Kerberos user principal
                     ``myTestUser@MONGODB.EXAMPLE.COM`` against the 
                     ``$external`` database:
                     
                     ``myTestUser?source=$external&mechanism=GSSAPI``
  
  
     * - PWD
       - The password associated with the :guilabel:`UID`.

  .. include:: /includes/fact-odbc-parameters.rst

  .. example::

     Your |dsn| configuration should resemble 
     the following image, if you are using Username and Password 
     authentication:
  
     .. figure:: /images/bi-connector/odbc-manager-dsn-config-auth.png
        :alt: ODBC Manager DSN configuration
        :align: center
---
title: (Optional) If |ssl| is enabled, add the |ssl| settings.
ref: ssl-keywords-dsn-macos
level: 4
stepnum: 6
content: |
  .. include:: /includes/odbc-manager-keywords.rst

  Using the procedure above, add the following keyword/value pairs:

  .. list-table::
     :widths: 20 80
     :header-rows: 1
     :stub-columns: 1

     * - Keyword
       - Value

     * - SSLKEY
       - The absolute file path to the ``.pem`` key file on the
         :doc:`mongosqld </reference/mongosqld>` host.

     * - SSLCERT
       - The absolute file path to path to the |ssl| certificate on the
         :doc:`mongosqld </reference/mongosqld>` host.

     * - SSLMODE
       - The option to ignore, permit or require |ssl| for connections 
         to :doc:`mongosqld </reference/mongosqld>`. Set to 
         ``REQUIRED``.

  .. note::

     Depending on your |ssl| implementation you may need to set some of
     the following ODBC keywords:

     .. list-table::
        :widths: 20 80
        :header-rows: 1

        * - Keyword
          - Value

        * - SSLCA
          - The absolute file path to the |ssl| certificate authority 
            file.

        * - ENABLE_CLEARTEXT_PLUGIN
          - The option to permit authentication information to be sent in cleartext. Set to ``1`` to enable.

  .. include:: /includes/fact-odbc-parameters.rst

  .. example::

     Your |dsn| configuration should resemble 
     the following image:
  
     .. figure:: /images/bi-connector/odbc-manager-dsn-config-auth-ssl.png
        :alt: ODBC Manager DSN configuration
        :align: center
---
title: Click :guilabel:`OK` to finish creating the DSN.
ref: finalize-user-dsn-macos
level: 4
stepnum: 7
...
